# 阿⾥⼀⾯

## 说⼀下ArrayList和LinkedList区别

```java
1. ⾸先，他们的底层数据结构不同，ArrayList底层是基于数组实现的，LinkedList底层是基于链表实现的
2. 由于底层数据结构不同，他们所适⽤的场景也不同，ArrayList更适合随机查找，LinkedList更适合删
除和添加，查询、添加、删除的时间复杂度不同
3. 另外ArrayList和LinkedList都实现了List接⼝，但是LinkedList还额外实现了Deque接⼝，所以
LinkedList还可以当做队列来使⽤
```



## 说⼀下HashMap的Put⽅法

```java
先说HashMap的Put⽅法的⼤体流程：
1. 根据Key通过哈希算法与与运算得出数组下标
2. 如果数组下标位置元素为空，则将key和value封装为Entry对象（JDK1.7中是Entry对象，JDK1.8中是
Node对象）并放⼊该位置
3. 如果数组下标位置元素不为空，则要分情况讨论
    a. 如果是JDK1.7，则先判断是否需要扩容，如果要扩容就进⾏扩容，如果不⽤扩容就⽣成Entry对
    象，并使⽤头插法添加到当前位置的链表中
    b. 如果是JDK1.8，则会先判断当前位置上的Node的类型，看是红⿊树Node，还是链表Node
        i. 如果是红⿊树Node，则将key和value封装为⼀个红⿊树节点并添加到红⿊树中去，在这个过
        	程中会判断红⿊树中是否存在当前key，如果存在则更新value
        ii. 如果此位置上的Node对象是链表节点，则将key和value封装为⼀个链表Node并通过尾插法插
            ⼊到链表的最后位置去，因为是尾插法，所以需要遍历链表，在遍历链表的过程中会判断是否
            存在当前key，如果存在则更新value，当遍历完链表后，将新链表Node插⼊到链表中，插⼊
            到链表后，会看当前链表的节点个数，如果⼤于等于8，那么则会将该链表转成红⿊树
        iii. 将key和value封装为Node插⼊到链表或红⿊树中后，再判断是否需要进⾏扩容，如果需要就
        	扩容，如果不需要就结束PUT⽅法
```



## 说⼀下ThreadLocal

```
1. ThreadLocal是Java中所提供的线程本地存储机制，可以利⽤该机制将数据缓存在某个线程内部，该线
    程可以在任意时刻、任意⽅法中获取缓存的数据
2. ThreadLocal底层是通过ThreadLocalMap来实现的，每个Thread对象（注意不是ThreadLocal
    对象）中都存在⼀个ThreadLocalMap，Map的key为ThreadLocal对象，Map的value为需要缓
    存的值
3. 如果在线程池中使⽤ThreadLocal会造成内存泄漏，因为当ThreadLocal对象使⽤完之后，应该
    要把设置的key，value，也就是Entry对象进⾏回收，但线程池中的线程不会回收，⽽线程对象
    是通过强引⽤指向ThreadLocalMap，ThreadLocalMap也是通过强引⽤指向Entry对象，线程
    不被回收，Entry对象也就不会被回收，从⽽出现内存泄漏，解决办法是，在使⽤了
    ThreadLocal对象之后，⼿动调⽤ThreadLocal的remove⽅法，⼿动清楚Entry对象
4. ThreadLocal经典的应⽤场景就是连接管理（⼀个线程持有⼀个连接，该连接对象可以在不同的⽅法之
    间进⾏传递，线程之间不共享同⼀个连接）
```

![image-20210704174301516](C:/Users/msksn/AppData/Roaming/Typora/typora-user-images/image-20210704174301516.png)



## 说⼀下JVM中，哪些是共享区，哪些可以作为gc root

```
1、堆区和⽅法区是所有线程共享的，栈、本地⽅法栈、程序计数器是每个线程独有的
2、什么是gc root，JVM在进⾏垃圾回收时，需要找到“垃圾”对象，也就是没有被引⽤的对象，但是直接
找“垃圾”对象是⽐较耗时的，所以反过来，先找“⾮垃圾”对象，也就是正常对象，那么就需要从某
些“根”开始去找，根据这些“根”的引⽤路径找到正常对象，⽽这些“根”有⼀个特征，就是它只会引⽤其他
对象，⽽不会被其他对象引⽤，例如：栈中的本地变量、⽅法区中的静态变量、本地⽅法栈中的变量、正
在运⾏的线程等可以作为gc root。
```

![image-20210704174407475](C:/Users/msksn/AppData/Roaming/Typora/typora-user-images/image-20210704174407475.png)